{% extends 'listings/base.html' %}
{% load static %}
{% block content %}
<nav class="bottom-navbar">
  <ul>
      <li><a href="{% url 'acceuilresponsables'%}" class="nav__link"><i class="fa-solid fa-user-ninja"></i><span class="nav__name">Menu Admin</span></a></li>
      
  </ul>
</nav>
<br>
<br>
<div class="body">
  <h1 style="text-align: center;">LIVRAISONS DU JOUR</h1> <h1 style="text-align: center;"> {{journees}} </h1>
  <br>
  <br>
  <p style="text-align: center;">{{ livraisons|length }} livraisons aujourd'hui</p>
  <br>
  <br>
  <h1 style="text-align: center;">MATIN <a href="{% url 'my_maptoday_view' %}" class="btn"><i class="fa-solid fa-map-location-dot fa-2xl" style="color: #74C0FC;"></i></a></h1>
  <br>
  <p style="text-align: center;">{{ livraisonsmatin|length }} livraisons le matin</p>
  <br>
  <table class="table table-striped">
      <thead class="thead-dark">
        <tr>
          
          <th scope="col" style="color: #303FBA;">Heure départ</th>
          <th scope="col" style="color: #303FBA;">Nom du contrat</th>
          <th scope="col" style="color: #303FBA;">Infos</th>
          <th scope="col" style="color: #303FBA;">Heure livraison</th>
          <th scope="col" style="color: #303FBA;">Livreur</th>
          <th scope="col" style="color: #303FBA;">Aide livreur</th>
          <th scope="col" style="color: #303FBA;">Route</th>
          <th scope="col" style="color: #303FBA;">Retour traiteur</th>
          <th scope="col" style="color: #303FBA;">lien</th>
          <th scope="col" style="color: #303FBA;">Geocode</th>


        </tr>
      </thead>
      <tbody>
          {% for livraison in livraisonsmatin %}
          {% if livraison.recuperation == True %}
        <tr>
          
          <td style="background-color: #F1B3DA;"><strong>{{ livraison.statut.heure_depart }}</strong></td>
          <td style="background-color: #F1B3DA;"><strong>{{livraison.nom}}</strong></td>
          <td style="background-color: #F1B3DA;"><strong>{{livraison.infodetail}}</strong></td>
          <td style="background-color: #F1B3DA;"><strong>{{ livraison.heure_livraison }}</strong></td>
          <td style="background-color: #F1B3DA;"><strong>{{livraison.statut.livreur}}</strong></td>
          <td style="background-color: #F1B3DA;"><strong>{{livraison.aidelivreur}}</strong></td>
          <td style="background-color: #F1B3DA;"><strong>{{ livraison.statut.nom }}</strong></td>
          {% if livraison.retourtraiteur == retourtraiteur %}
          <td><strong><i class="fa-solid fa-house-chimney-window fa-xl"></i></i></strong></td>
          {%  else %}
          <td></td>
          {% endif %}
          <td style="background-color: #F1B3DA;"><a href="{% url 'livraisonrespdetail' livraison.id %}" class="btn" ><i class="fa-solid fa-arrow-up-right-from-square"></i></a></td>
          {% if livraison.lng == None %}
          <td><strong><a href="{% url 'geocodingtoday' livraison.id %}" class="btn"><i class="fa-solid fa-location-dot"></i></a></strong></td>
          {% else %}
          <td><strong><i class="fa-solid fa-location-dot"  style="color: #63E6BE;"></i></strong></td>
          {% endif %}
        </tr>

          {% else %}
          <tr>
          
            <td><strong>{{ livraison.statut.heure_depart }}</strong></td>
            <td><strong>{{livraison.nom}}</strong></td>
            <td><strong>{{livraison.infodetail}}</strong></td>
            <td><strong>{{ livraison.heure_livraison }}</strong></td>
            <td><strong>{{livraison.statut.livreur}}</strong></td>
            <td><strong>{{livraison.aidelivreur}}</strong></td>
            <td><strong>{{ livraison.statut.nom }}</strong></td>
            {% if livraison.retourtraiteur == retourtraiteur %}
          <td><strong><i class="fa-solid fa-house-chimney-window fa-xl"></i></i></strong></td>
          {%  else %}
          <td></td>
          {% endif %}
            <td><a href="{% url 'livraisonrespdetail' livraison.id %}" class="btn" ><i class="fa-solid fa-arrow-up-right-from-square"></i></a></td>
            {% if livraison.lng == None %}
          <td><strong><a href="{% url 'geocodingtoday' livraison.id %}" class="btn"><i class="fa-solid fa-location-dot"></i></a></strong></td>
          {% else %}
          <td><strong><i class="fa-solid fa-location-dot" style="color: #63E6BE;"></i></strong></td>
          {% endif %}
            
            
        </tr>
          {% endif %}
        {% endfor %}
        
      </tbody>
    </table>
  </div>
  
  <br>
  <br>
  <br>
  <h1 style="text-align: center;">MIDI <a href="{% url 'my_maptodaymidi_view' %}" class="btn"><i class="fa-solid fa-map-location-dot fa-2xl" style="color: #74C0FC;"></i></a></h1>
  <br>
  <p style="text-align: center;">{{ livraisonsmidi|length }} livraisons le midi</p>
  <br>
  <table class="table table-striped">
      <thead class="thead-dark">
        <tr>
          
          <th scope="col" style="color: #303FBA;">Heure départ</th>
          <th scope="col" style="color: #303FBA;">Nom du contrat</th>
          <th scope="col" style="color: #303FBA;">Infos</th>
          <th scope="col" style="color: #303FBA;">Heure livraison</th>
          <th scope="col" style="color: #303FBA;">Livreur</th>
          <th scope="col" style="color: #303FBA;">Aide livreur</th>
          <th scope="col" style="color: #303FBA;">Route</th>
          <th scope="col" style="color: #303FBA;">Retour traiteur</th>
          <th scope="col" style="color: #303FBA;">lien</th>
          <th scope="col" style="color: #303FBA;">Geocode</th>


        </tr>
      </thead>
      <tbody>
          {% for livraison in livraisonsmidi %}
          {% if livraison.recuperation == True %}
        <tr>
          <td style="background-color: #F1B3DA;"><strong>{{ livraison.statut.heure_depart }}</strong></td>
          <td style="background-color: #F1B3DA;"><strong>{{livraison.nom}}</strong></td>
          <td style="background-color: #F1B3DA;"><strong>{{livraison.infodetail}}</strong></td>
          <td style="background-color: #F1B3DA;"><strong>{{ livraison.heure_livraison }}</strong></td>
          <td style="background-color: #F1B3DA;"><strong>{{livraison.statut.livreur}}</strong></td>
          <td style="background-color: #F1B3DA;"><strong>{{livraison.aidelivreur}}</strong></td>
          <td style="background-color: #F1B3DA;"><strong>{{ livraison.statut.nom }}</strong></td>
          {% if livraison.retourtraiteur == retourtraiteur %}
          <td style="background-color: #F1B3DA;"><strong><i class="fa-solid fa-house-chimney-window fa-xl"></i></strong></td>
          {%  else %}
          <td></td>
          {% endif %}
          <td style="background-color: #F1B3DA;"><a href="{% url 'livraisonrespdetail' livraison.id %}" class="btn" ><i class="fa-solid fa-arrow-up-right-from-square"></i></a></td>
          {% if livraison.lng == None %}
          <td><strong><a href="{% url 'geocodingtoday' livraison.id %}" class="btn"><i class="fa-solid fa-location-dot"></i></a></strong></td>
          {% else %}
          <td><strong><i class="fa-solid fa-location-dot"  style="color: #63E6BE;"></i></strong></td>
          {% endif %}
        </tr>

          {% else %}
          <tr>
          
            <td><strong>{{ livraison.statut.heure_depart }}</strong></td>
            <td><strong>{{livraison.nom}}</strong></td>
            <td><strong>{{livraison.infodetail}}</strong></td>
            <td><strong>{{ livraison.heure_livraison }}</strong></td>
            <td><strong>{{livraison.statut.livreur}}</strong></td>
            <td><strong>{{livraison.aidelivreur}}</strong></td>
            <td><strong>{{ livraison.statut.nom }}</strong></td>
            {% if livraison.retourtraiteur == retourtraiteur %}
          <td><strong><i class="fa-solid fa-house-chimney-window fa-xl"></i></strong></td>
          {%  else %}
          <td></td>
          {% endif %}
            <td><a href="{% url 'livraisonrespdetail' livraison.id %}" class="btn" ><i class="fa-solid fa-arrow-up-right-from-square"></i></a></td>
            {% if livraison.lng == None %}
          <td><strong><a href="{% url 'geocodingtoday' livraison.id %}" class="btn"><i class="fa-solid fa-location-dot"></i></a></strong></td>
          {% else %}
          <td><strong><i class="fa-solid fa-location-dot" style="color: #63E6BE;"></i></strong></td>
          {% endif %}
        </tr>
          {% endif %}
        {% endfor %}
        
      </tbody>
    </table>
  </div>
  
  <br>
  <br>
  <br>
  <h1 style="text-align: center;">APRES MIDI <a href="{% url 'my_maptodayaprem_view' %}" class="btn"><i class="fa-solid fa-map-location-dot fa-2xl" style="color: #74C0FC;"></i></a></h1>
  <br>
  <p style="text-align: center;">{{ livraisonsapresmidi|length }} livraisons l'après midi</p>
  <br>
  <table class="table table-striped">
      <thead class="thead-dark">
        <tr>
          <th scope="col" style="color: #303FBA;">Heure départ</th>
          <th scope="col" style="color: #303FBA;">Nom du contrat</th>
          <th scope="col" style="color: #303FBA;">Infos</th>
          <th scope="col" style="color: #303FBA;">Heure livraison</th>
          <th scope="col" style="color: #303FBA;">Livreur</th>
          <th scope="col" style="color: #303FBA;">Aide livreur</th>
          <th scope="col" style="color: #303FBA;">Route</th>
          <th scope="col" style="color: #303FBA;">Retour traiteur</th>
          <th scope="col" style="color: #303FBA;">lien</th>
          <th scope="col" style="color: #303FBA;">Geocode</th>


        </tr>
      </thead>
      <tbody >
        {% for livraison in livraisonsapresmidi %}
        {% if livraison.recuperation == True %}
      <tr>
        <td style="background-color: #F1B3DA;"><strong>{{ livraison.statut.heure_depart }}</strong></td>
          <td style="background-color: #F1B3DA;"><strong>{{livraison.nom}}</strong></td>
          <td style="background-color: #F1B3DA;"><strong>{{livraison.infodetail}}</strong></td>
          <td style="background-color: #F1B3DA;"><strong>{{ livraison.heure_livraison }}</strong></td>
          <td style="background-color: #F1B3DA;"><strong>{{livraison.statut.livreur}}</strong></td>
          <td style="background-color: #F1B3DA;"><strong>{{livraison.aidelivreur}}</strong></td>
          <td style="background-color: #F1B3DA;"><strong>{{ livraison.statut.nom }}</strong></td>
        {% if livraison.retourtraiteur == retourtraiteur %}
        <td><strong><i class="fa-solid fa-house-chimney-window fa-xl"></i></strong></td>
        {%  else %}
        <td></td>
        {% endif %}
        <td><a href="{% url 'livraisonrespdetail' livraison.id %}" class="btn" ><i class="fa-solid fa-arrow-up-right-from-square"></i></a></td>
        {% if livraison.lng == None %}
        <td><strong><a href="{% url 'geocodingtoday' livraison.id %}" class="btn"><i class="fa-solid fa-location-dot"></i></a></strong></td>
        {% else %}
        <td><strong><i class="fa-solid fa-location-dot"  style="color: #63E6BE;"></i></strong></td>
        {% endif %}
        
      </tr>

        {% else %}
        <tr>
        
          <td><strong>{{ livraison.statut.heure_depart }}</strong></td>
          <td><strong>{{livraison.nom}}</strong></td>
          <td><strong>{{livraison.infodetail}}</strong></td>
          <td><strong>{{ livraison.heure_livraison }}</strong></td>
          <td><strong>{{livraison.statut.livreur}}</strong></td>
          <td><strong>{{livraison.aidelivreur}}</strong></td>
          <td><strong>{{ livraison.statut.nom }}</strong></td>
          {% if livraison.retourtraiteur == retourtraiteur %}
        <td><strong><i class="fa-solid fa-house-chimney-window fa-xl"></i></strong></td>
        {%  else %}
        <td></td>
        {% endif %}
          <td><a href="{% url 'livraisonrespdetail' livraison.id %}" class="btn" ><i class="fa-solid fa-arrow-up-right-from-square"></i></a></td>
          {% if livraison.lng == None %}
        <td><strong><a href="{% url 'geocodingtoday' livraison.id %}" class="btn"><i class="fa-solid fa-location-dot"></i></a></strong></td>
        {% else %}
        <td><strong><i class="fa-solid fa-location-dot" style="color: #63E6BE;"></i></strong></td>
        {% endif %}
      </tr>
        {% endif %}
      {% endfor %}
      </tbody>
    </table>
  </div> 
  <br>
  <br>
  <br>
  
      
  
  <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="offcanvasExampleLabel">Liens Formulaires</h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <div>
        <p><a class="btn btn-primary" href="https://discord.com/channels/1174091428876533800/1194755233935523952" target="_blank">Photo livraison <i class="fa-brands fa-discord"></i></a></p>
        <p><a href="https://view.forms.app/loicveyre/jeparsenlivraison" target="_blank" class="btn btn-primary">Départ <i class="fa-solid fa-truck-fast"></i></a></p>
        <p><a href="https://view.forms.app/loicveyre/jereviensdelivraison" target="_blank" class="btn btn-primary">Retour <i class="fa-sharp fa-solid fa-truck fa-flip-horizontal"></i></a></p>
        <p><a href="https://oakmnxgj.forms.app/recuplivreurs" target="_blank" class="btn btn-primary">Récup <i class="fa-solid fa-dolly"></i></a>
        </p>
        <p><a href="https://oakmnxgj.forms.app/essence" target="_blank" class="btn btn-primary">Essence <i class="fa-solid fa-gas-pump"></i></a>
        </p>
      </p>    
    </div>
    </div>
  </div>

   
  


{% endblock %}

